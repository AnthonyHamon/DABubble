<section>
  @for (message of messages; track message) {
  @if(ifDaySeparatorIsNeeded($index)) {
  <app-message-date [date]="message.createdAt"></app-message-date>
  <app-message [messageEditorOpen]="messageEditorOpen" [isViewed]="false" (messageEditorOpenChange)="messageEditorOpen = $event" (messageViewed)="messageViewed($event)"
    [ngClass]="{ 'chat-view': true }" [id]="message.id"
    [messageData]="message"></app-message>
  } @else {
  <app-message [previousMessageFromSameUser]="ifMessageFromSameUserAsPrevious($index)"
    [messageEditorOpen]="messageEditorOpen" (messageEditorOpenChange)="messageEditorOpen = $event" (messageViewed)="messageViewed($event)"
    [ngClass]="{ 'chat-view': true }" [id]="message.id"
    [messageData]="message"></app-message>
  }
  }
</section>